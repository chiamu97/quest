<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Protocollo Attivo</title>
    <style>
        /* --- IMPOSTAZIONI BASE --- */
        * { box-sizing: border-box; }
        body {
            background-color: #111;
            color: #fff;
            font-family: 'Courier New', Courier, monospace;
            height: 100vh;
            margin: 0;
            overflow: hidden;
            display: flex;
            justify-content: center;
            align-items: center;
            position: relative;
        }

        /* --- IL VELENO (Contenitore) --- */
        #poison-container {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 0%; /* Cresce col tempo */
            z-index: 1; /* Dietro al tastierino */
            transition: height 1s linear;
            display: flex;
            flex-direction: column;
            justify-content: flex-end; /* Spinge le onde in basso */
        }

        /* La parte solida del veleno (sopra le onde) */
        .poison-body {
            background: linear-gradient(to bottom, #0a3a0a, #1e6b1e);
            flex-grow: 1; /* Riempie tutto lo spazio sopra le onde */
            width: 100%;
        }

        /* Le Onde SVG */
        .waves {
            position: relative;
            width: 100%;
            height: 60px; /* Altezza dell'onda */
            margin-bottom: -1px; /* Corregge piccoli spazi vuoti */
            min-height: 60px;
        }

        /* Animazione dell'onda che scorre */
        .parallax > use {
            animation: move-forever 25s cubic-bezier(.55,.5,.45,.5) infinite;
        }
        .parallax > use:nth-child(1) {
            animation-delay: -2s;
            animation-duration: 7s;
            fill: rgba(30, 107, 30, 0.7); /* Onda semitrasparente */
        }
        .parallax > use:nth-child(2) {
            animation-delay: -3s;
            animation-duration: 10s;
            fill: rgba(30, 107, 30, 0.5); /* Onda semitrasparente */
        }
        .parallax > use:nth-child(3) {
            animation-delay: -4s;
            animation-duration: 13s;
            fill: #1e6b1e; /* Onda principale piena */
        }

        @keyframes move-forever {
            0% { transform: translate3d(-90px,0,0); }
            100% { transform: translate3d(85px,0,0); }
        }

        /* --- IL TASTIERINO --- */
        .container {
            position: relative;
            z-index: 10;
            background-color: #222;
            padding: 25px;
            border-radius: 6px;
            border: 5px solid #444;
            box-shadow: 0 0 60px rgba(0,0,0,0.8);
            width: 280px;
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .header-label {
            text-align: center; color: #888; text-transform: uppercase;
            border-bottom: 2px solid #555; padding-bottom: 8px; margin-bottom: 5px;
            font-size: 0.9rem;
        }

        #timer {
            font-size: 3.5rem; color: #f00; text-align: center;
            background: #000; padding: 10px; border: 3px solid #555; border-radius: 4px;
            font-weight: bold; text-shadow: 0 0 10px #f00;
        }

        #display {
            background: #030; color: #0f0; font-size: 1.5rem;
            height: 50px; line-height: 50px; text-align: center;
            border: 3px inset #555; letter-spacing: 4px; overflow: hidden; border-radius: 4px;
        }
        .display-error { background: #500 !important; color: #fff !important; }

        .keypad { display: grid; grid-template-columns: repeat(3, 1fr); gap: 8px; }

        button {
            background: linear-gradient(to bottom, #444, #333); 
            color: #fff; border: 1px solid #555; border-radius: 4px;
            font-size: 1.4rem; padding: 15px 0; cursor: pointer;
            box-shadow: 0 4px 0 #111;
        }
        button:active { transform: translateY(4px); box-shadow: none; }

        .btn-clear { background: linear-gradient(to bottom, #dba800, #b8860b); color: #000; font-weight: bold; }
        .btn-enter { background: linear-gradient(to bottom, #00802b, #006400); font-weight: bold; }

        #message { text-align: center; height: 20px; color: #f44; font-weight: bold; font-size: 0.9rem; margin-top: -5px;}

        /* --- SCHERMATE AVVIO / FINE --- */
        .overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.95);
            z-index: 999;
            display: flex; justify-content: center; align-items: center;
            flex-direction: column; text-align: center;
        }

        .btn-start {
            padding: 20px 40px; font-size: 1.5rem; background: #0f0; border: none;
            cursor: pointer; font-weight: bold; text-transform: uppercase;
            box-shadow: 0 0 20px #0f0; font-family: monospace;
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse { 0% { opacity: 1; } 50% { opacity: 0.8; } 100% { opacity: 1; } }

        .hidden { display: none !important; }
        .boom { background: #800; }
        .safe { background: #060; }
        h1 { margin
